#!/bin/bash -eu

case "$1" in
  -v|--version)
    version="$2"
esac

mkdir -p ${OPENSHIFT_HOMEDIR}/.m2

shopt -s dotglob
for dir in logs sys_mods; do
    mkdir -p $OPENSHIFT_VERTX_DIR/$dir
done

echo "$version" > $OPENSHIFT_VERTX_DIR/env/OPENSHIFT_VERTX_VERSION
echo "M4" > $OPENSHIFT_VERTX_DIR/env/OPENSHIFT_VERTX_MILESTONE

if [ ! -d "$OPENSHIFT_VERTX_DIR/usr/$vertx_dist" ]; then
  wget http://dl.bintray.com/vertx/downloads/$vertx_dist.tar.gz -O $OPENSHIFT_TMP_DIR/$vertx_dist.tar.gz
  tar xzf $OPENSHIFT_TMP_DIR/$vertx_dist.tar.gz -C $OPENSHIFT_VERTX_DIR/usr/
fi
